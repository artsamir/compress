{% extends 'base.html' %}
{% block title %}Project Front Page Maker - Create Professional Cover Pages{% endblock %}
{% block description %}Create stunning project front pages and cover pages for academic projects, reports, and dissertations. Free online project cover page generator.{% endblock %}
{% block keywords %}project front page, cover page maker, project cover page, academic project, title page generator{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/tools_common.css') }}">
<script src="{{ url_for('static', filename='js/tools_common.js') }}"></script>
{% endblock %}

{% block content %}
<div class="tool-page">
    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()">
        <span class="icon-sun">‚òÄÔ∏è</span>
        <span class="icon-moon">üåô</span>
    </button>

    <div class="tool-container">
        <!-- Header -->
        <div class="tool-header">
            <div class="emoji-icon">üìö</div>
            <h1>Project Front Page Maker</h1>
            <p>Create professional cover pages for your projects! üéì</p>
        </div>

        <!-- Instructions -->
        <div class="instructions-card">
            <h3>üìã How to Use</h3>
            <ol>
                <li><strong>Choose</strong> a template that suits your project type</li>
                <li><strong>Fill in</strong> your project details (title, name, institution, etc.)</li>
                <li><strong>Customize</strong> colors and add your logo if needed</li>
                <li><strong>Preview</strong> your cover page in real-time</li>
                <li><strong>Download</strong> as PNG or PDF!</li>
            </ol>
        </div>

        <!-- Main Tool Card -->
        <div class="tool-card">
            <!-- Template Selection -->
            <div class="form-group">
                <label><i class="fas fa-palette"></i> Select Template</label>
                <div class="options-grid" style="grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));">
                    <div class="option-card selected" data-template="academic" onclick="selectTemplate(this)">
                        <div class="option-icon">üéì</div>
                        <div class="option-label">Academic</div>
                    </div>
                    <div class="option-card" data-template="modern" onclick="selectTemplate(this)">
                        <div class="option-icon">‚ú®</div>
                        <div class="option-label">Modern</div>
                    </div>
                    <div class="option-card" data-template="minimal" onclick="selectTemplate(this)">
                        <div class="option-icon">‚ö™</div>
                        <div class="option-label">Minimal</div>
                    </div>
                    <div class="option-card" data-template="corporate" onclick="selectTemplate(this)">
                        <div class="option-icon">üè¢</div>
                        <div class="option-label">Corporate</div>
                    </div>
                    <div class="option-card" data-template="creative" onclick="selectTemplate(this)">
                        <div class="option-icon">üé®</div>
                        <div class="option-label">Creative</div>
                    </div>
                    <div class="option-card" data-template="engineering" onclick="selectTemplate(this)">
                        <div class="option-icon">‚öôÔ∏è</div>
                        <div class="option-label">Engineering</div>
                    </div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 2rem;">
                <!-- Form Section -->
                <div class="form-section" style="min-width: 0;">
                    <!-- Logo Upload -->
                    <div class="form-group">
                        <label>üì∑ Institution/Company Logo</label>
                        <div class="upload-area mini" id="logoUploadArea">
                            <div class="upload-icon">üñºÔ∏è</div>
                            <p>Click or drag logo here</p>
                            <input type="file" id="logoInput" accept="image/*" hidden onchange="handleLogoUpload(event)">
                        </div>
                        <div id="logoPreviewContainer" style="display: none; text-align: center; margin-top: 0.5rem;">
                            <img id="logoPreviewImg" style="max-height: 60px; border-radius: 4px;">
                            <button class="btn btn-secondary" style="margin-top: 0.5rem; padding: 0.25rem 0.5rem; font-size: 0.8rem;" onclick="removeLogo()">Remove</button>
                        </div>
                    </div>

                    <!-- Institution Details -->
                    <h4 style="color: var(--text-primary); margin: 1.5rem 0 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        üè´ Institution Details
                    </h4>
                    <div class="form-group">
                        <label>Institution/University Name *</label>
                        <input type="text" id="institutionName" placeholder="Harvard University" oninput="updatePreview()">
                    </div>
                    <div class="form-group">
                        <label>Department/Faculty</label>
                        <input type="text" id="department" placeholder="Department of Computer Science" oninput="updatePreview()">
                    </div>

                    <!-- Project Details -->
                    <h4 style="color: var(--text-primary); margin: 1.5rem 0 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        üìù Project Details
                    </h4>
                    <div class="form-group">
                        <label>Project Title *</label>
                        <textarea id="projectTitle" placeholder="Machine Learning Approach to Predicting Student Performance" oninput="updatePreview()" style="min-height: 80px;"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Project Type</label>
                        <select id="projectType" onchange="updatePreview()">
                            <option value="">Select Type...</option>
                            <option value="Final Year Project">Final Year Project</option>
                            <option value="Dissertation">Dissertation</option>
                            <option value="Thesis">Thesis</option>
                            <option value="Research Paper">Research Paper</option>
                            <option value="Lab Report">Lab Report</option>
                            <option value="Case Study">Case Study</option>
                            <option value="Internship Report">Internship Report</option>
                            <option value="Term Paper">Term Paper</option>
                            <option value="Project Report">Project Report</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Subject/Course</label>
                        <input type="text" id="subject" placeholder="CS601 - Artificial Intelligence" oninput="updatePreview()">
                    </div>

                    <!-- Student Details -->
                    <h4 style="color: var(--text-primary); margin: 1.5rem 0 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        üë§ Student Details
                    </h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Student Name *</label>
                            <input type="text" id="studentName" placeholder="John Doe" oninput="updatePreview()">
                        </div>
                        <div class="form-group">
                            <label>Roll Number / ID</label>
                            <input type="text" id="rollNumber" placeholder="2021-CS-001" oninput="updatePreview()">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Batch / Year</label>
                            <input type="text" id="batch" placeholder="2021-2025" oninput="updatePreview()">
                        </div>
                        <div class="form-group">
                            <label>Section/Class</label>
                            <input type="text" id="section" placeholder="Section A" oninput="updatePreview()">
                        </div>
                    </div>

                    <!-- Supervisor Details -->
                    <h4 style="color: var(--text-primary); margin: 1.5rem 0 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        üë®‚Äçüè´ Supervisor Details
                    </h4>
                    <div class="form-group">
                        <label>Supervisor/Guide Name</label>
                        <input type="text" id="supervisorName" placeholder="Dr. Jane Smith" oninput="updatePreview()">
                    </div>
                    <div class="form-group">
                        <label>Supervisor Designation</label>
                        <input type="text" id="supervisorDesignation" placeholder="Associate Professor" oninput="updatePreview()">
                    </div>

                    <!-- Submission Details -->
                    <h4 style="color: var(--text-primary); margin: 1.5rem 0 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        üìÖ Submission Details
                    </h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Submission Date</label>
                            <input type="date" id="submissionDate" oninput="updatePreview()">
                        </div>
                        <div class="form-group">
                            <label>Academic Year</label>
                            <input type="text" id="academicYear" placeholder="2024-2025" oninput="updatePreview()">
                        </div>
                    </div>

                    <!-- Customization -->
                    <h4 style="color: var(--text-primary); margin: 1.5rem 0 1rem; display: flex; align-items: center; gap: 0.5rem;">
                        üé® Customization
                    </h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Primary Color</label>
                            <input type="color" id="primaryColor" value="#1a365d" onchange="updatePreview()">
                        </div>
                        <div class="form-group">
                            <label>Secondary Color</label>
                            <input type="color" id="secondaryColor" value="#c53030" onchange="updatePreview()">
                        </div>
                        <div class="form-group">
                            <label>Background</label>
                            <select id="bgPattern" onchange="updatePreview()">
                                <option value="solid">Solid White</option>
                                <option value="gradient">Gradient</option>
                                <option value="border">Border Frame</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Preview Section -->
                <div class="preview-section" style="min-width: 0;">
                    <div style="position: sticky; top: 1rem;">
                        <h3 style="color: var(--text-primary); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            üìÑ Live Preview
                        </h3>
                        <div style="background: #f5f5f5; padding: 1rem; border-radius: 8px; overflow: hidden;">
                            <canvas id="previewCanvas" width="595" height="842" style="width: 100%; max-width: 100%; display: block; margin: 0 auto; border-radius: 4px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="btn-group" style="margin-top: 2rem;">
                <button class="btn btn-secondary" onclick="resetForm()">
                    <i class="fas fa-redo"></i> Reset
                </button>
                <button class="btn btn-primary" onclick="downloadPNG()">
                    <i class="fas fa-image"></i> Download PNG
                </button>
                <button class="btn btn-download" onclick="downloadPDF()">
                    <i class="fas fa-file-pdf"></i> Download PDF
                </button>
            </div>
        </div>

        <!-- Tips -->
        <div class="instructions-card" style="margin-top: 2rem;">
            <h3>üí° Tips for a Great Cover Page</h3>
            <ol>
                <li><strong>Use your institution's official colors</strong> for a professional look</li>
                <li><strong>Keep the title concise</strong> but descriptive (ideally under 15 words)</li>
                <li><strong>Add a logo</strong> if your institution has one - it adds credibility</li>
                <li><strong>Double-check all details</strong> before downloading (names, dates, IDs)</li>
                <li><strong>Use consistent formatting</strong> throughout your project</li>
            </ol>
        </div>
    </div>
</div>

<style>
.upload-area.mini {
    padding: 1rem;
    min-height: auto;
}
.upload-area.mini .upload-icon {
    font-size: 1.5rem;
    margin-bottom: 0.25rem;
}
.upload-area.mini p {
    margin: 0;
    font-size: 0.85rem;
}

@media (max-width: 900px) {
    .tool-card > div[style*="grid-template-columns: 1fr 1fr"] {
        grid-template-columns: 1fr !important;
    }
    .preview-section > div {
        position: static !important;
    }
}
</style>

<script>
let currentTemplate = 'academic';
let logoImage = null;

const templates = {
    academic: {
        layout: 'centered',
        borderStyle: 'double',
        titleStyle: 'classic',
        accentPosition: 'top'
    },
    modern: {
        layout: 'left-aligned',
        borderStyle: 'none',
        titleStyle: 'bold',
        accentPosition: 'left'
    },
    minimal: {
        layout: 'centered',
        borderStyle: 'single',
        titleStyle: 'light',
        accentPosition: 'none'
    },
    corporate: {
        layout: 'left-aligned',
        borderStyle: 'none',
        titleStyle: 'professional',
        accentPosition: 'top-bottom'
    },
    creative: {
        layout: 'centered',
        borderStyle: 'none',
        titleStyle: 'creative',
        accentPosition: 'diagonal'
    },
    engineering: {
        layout: 'centered',
        borderStyle: 'technical',
        titleStyle: 'technical',
        accentPosition: 'corners'
    }
};

document.addEventListener('DOMContentLoaded', () => {
    document.getElementById('submissionDate').value = new Date().toISOString().split('T')[0];
    
    // Setup logo upload
    const uploadArea = document.getElementById('logoUploadArea');
    uploadArea.addEventListener('click', () => document.getElementById('logoInput').click());
    
    CutcompressTools.setupDragAndDrop(uploadArea, (e) => {
        const file = e.dataTransfer.files[0];
        if (file && file.type.startsWith('image/')) {
            loadLogo(file);
        }
    });
    
    updatePreview();
});

function selectTemplate(element) {
    document.querySelectorAll('.option-card[data-template]').forEach(el => el.classList.remove('selected'));
    element.classList.add('selected');
    currentTemplate = element.dataset.template;
    updatePreview();
}

function handleLogoUpload(event) {
    const file = event.target.files[0];
    if (file) loadLogo(file);
}

function loadLogo(file) {
    const reader = new FileReader();
    reader.onload = (e) => {
        logoImage = new Image();
        logoImage.onload = () => {
            document.getElementById('logoPreviewImg').src = e.target.result;
            document.getElementById('logoPreviewContainer').style.display = 'block';
            document.getElementById('logoUploadArea').style.display = 'none';
            updatePreview();
        };
        logoImage.src = e.target.result;
    };
    reader.readAsDataURL(file);
}

function removeLogo() {
    logoImage = null;
    document.getElementById('logoInput').value = '';
    document.getElementById('logoPreviewContainer').style.display = 'none';
    document.getElementById('logoUploadArea').style.display = 'block';
    updatePreview();
}

function formatDateDisplay(dateStr) {
    if (!dateStr) return '';
    return new Date(dateStr).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
}

function updatePreview() {
    const canvas = document.getElementById('previewCanvas');
    const ctx = canvas.getContext('2d');
    
    const primaryColor = document.getElementById('primaryColor').value;
    const secondaryColor = document.getElementById('secondaryColor').value;
    const bgPattern = document.getElementById('bgPattern').value;
    
    // Clear canvas
    ctx.fillStyle = '#ffffff';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // Background pattern
    if (bgPattern === 'gradient') {
        const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
        gradient.addColorStop(0, '#ffffff');
        gradient.addColorStop(1, primaryColor + '15');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
    } else if (bgPattern === 'border') {
        // Outer border
        ctx.strokeStyle = primaryColor;
        ctx.lineWidth = 8;
        ctx.strokeRect(20, 20, canvas.width - 40, canvas.height - 40);
        // Inner border
        ctx.lineWidth = 2;
        ctx.strokeRect(30, 30, canvas.width - 60, canvas.height - 60);
    }
    
    // Template-specific decorations
    const template = templates[currentTemplate];
    
    if (currentTemplate === 'academic') {
        // Double line at top
        ctx.fillStyle = primaryColor;
        ctx.fillRect(50, 50, canvas.width - 100, 4);
        ctx.fillRect(50, 58, canvas.width - 100, 2);
        // Double line at bottom
        ctx.fillRect(50, canvas.height - 60, canvas.width - 100, 2);
        ctx.fillRect(50, canvas.height - 54, canvas.width - 100, 4);
    } else if (currentTemplate === 'modern') {
        // Left accent bar
        ctx.fillStyle = primaryColor;
        ctx.fillRect(0, 0, 10, canvas.height);
        // Top accent
        ctx.fillStyle = secondaryColor;
        ctx.fillRect(10, 0, canvas.width - 10, 5);
    } else if (currentTemplate === 'corporate') {
        // Top and bottom bars
        ctx.fillStyle = primaryColor;
        ctx.fillRect(0, 0, canvas.width, 30);
        ctx.fillRect(0, canvas.height - 30, canvas.width, 30);
    } else if (currentTemplate === 'creative') {
        // Diagonal accent
        ctx.fillStyle = primaryColor + '20';
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(canvas.width * 0.6, 0);
        ctx.lineTo(0, canvas.height * 0.4);
        ctx.closePath();
        ctx.fill();
        
        ctx.fillStyle = secondaryColor + '20';
        ctx.beginPath();
        ctx.moveTo(canvas.width, canvas.height);
        ctx.lineTo(canvas.width * 0.4, canvas.height);
        ctx.lineTo(canvas.width, canvas.height * 0.6);
        ctx.closePath();
        ctx.fill();
    } else if (currentTemplate === 'engineering') {
        // Corner brackets
        ctx.strokeStyle = primaryColor;
        ctx.lineWidth = 3;
        // Top left
        ctx.beginPath();
        ctx.moveTo(30, 70);
        ctx.lineTo(30, 30);
        ctx.lineTo(70, 30);
        ctx.stroke();
        // Top right
        ctx.beginPath();
        ctx.moveTo(canvas.width - 70, 30);
        ctx.lineTo(canvas.width - 30, 30);
        ctx.lineTo(canvas.width - 30, 70);
        ctx.stroke();
        // Bottom left
        ctx.beginPath();
        ctx.moveTo(30, canvas.height - 70);
        ctx.lineTo(30, canvas.height - 30);
        ctx.lineTo(70, canvas.height - 30);
        ctx.stroke();
        // Bottom right
        ctx.beginPath();
        ctx.moveTo(canvas.width - 70, canvas.height - 30);
        ctx.lineTo(canvas.width - 30, canvas.height - 30);
        ctx.lineTo(canvas.width - 30, canvas.height - 70);
        ctx.stroke();
    }
    
    let yPos = 100;
    const centerX = canvas.width / 2;
    
    // Logo
    if (logoImage) {
        const maxLogoHeight = 80;
        const maxLogoWidth = 200;
        let logoWidth = logoImage.width;
        let logoHeight = logoImage.height;
        
        if (logoHeight > maxLogoHeight) {
            logoWidth = (logoWidth * maxLogoHeight) / logoHeight;
            logoHeight = maxLogoHeight;
        }
        if (logoWidth > maxLogoWidth) {
            logoHeight = (logoHeight * maxLogoWidth) / logoWidth;
            logoWidth = maxLogoWidth;
        }
        
        ctx.drawImage(logoImage, centerX - logoWidth / 2, yPos, logoWidth, logoHeight);
        yPos += logoHeight + 30;
    }
    
    // Institution Name
    const institutionName = document.getElementById('institutionName').value;
    if (institutionName) {
        ctx.fillStyle = primaryColor;
        ctx.font = 'bold 24px Georgia, serif';
        ctx.textAlign = 'center';
        wrapText(ctx, institutionName.toUpperCase(), centerX, yPos, canvas.width - 100, 30);
        yPos += 40 + (Math.ceil(ctx.measureText(institutionName).width / (canvas.width - 100)) * 30);
    }
    
    // Department
    const department = document.getElementById('department').value;
    if (department) {
        ctx.fillStyle = '#444';
        ctx.font = '16px Georgia, serif';
        ctx.fillText(department, centerX, yPos);
        yPos += 30;
    }
    
    yPos += 20;
    
    // Decorative line
    ctx.fillStyle = secondaryColor;
    ctx.fillRect(centerX - 100, yPos, 200, 2);
    yPos += 40;
    
    // Project Type
    const projectType = document.getElementById('projectType').value;
    if (projectType) {
        ctx.fillStyle = '#666';
        ctx.font = '14px Arial, sans-serif';
        ctx.fillText('A ' + projectType + ' Report', centerX, yPos);
        yPos += 25;
        ctx.fillText('on', centerX, yPos);
        yPos += 30;
    }
    
    // Project Title
    const projectTitle = document.getElementById('projectTitle').value || 'Project Title';
    ctx.fillStyle = primaryColor;
    ctx.font = currentTemplate === 'minimal' ? '26px Georgia, serif' : 'bold 28px Georgia, serif';
    ctx.textAlign = 'center';
    const titleLines = wrapText(ctx, projectTitle.toUpperCase(), centerX, yPos, canvas.width - 120, 35, true);
    yPos += titleLines * 35 + 30;
    
    // Subject/Course
    const subject = document.getElementById('subject').value;
    if (subject) {
        ctx.fillStyle = '#555';
        ctx.font = 'italic 14px Georgia, serif';
        ctx.fillText(subject, centerX, yPos);
        yPos += 30;
    }
    
    yPos += 20;
    
    // Decorative line
    ctx.fillStyle = secondaryColor;
    ctx.fillRect(centerX - 60, yPos, 120, 1);
    yPos += 40;
    
    // Submitted By Section
    const studentName = document.getElementById('studentName').value;
    const rollNumber = document.getElementById('rollNumber').value;
    const batch = document.getElementById('batch').value;
    const section = document.getElementById('section').value;
    
    if (studentName || rollNumber) {
        ctx.fillStyle = '#666';
        ctx.font = '12px Arial, sans-serif';
        ctx.fillText('Submitted By', centerX, yPos);
        yPos += 25;
        
        if (studentName) {
            ctx.fillStyle = '#333';
            ctx.font = 'bold 18px Georgia, serif';
            ctx.fillText(studentName, centerX, yPos);
            yPos += 25;
        }
        
        if (rollNumber) {
            ctx.fillStyle = '#555';
            ctx.font = '14px Arial, sans-serif';
            ctx.fillText(rollNumber, centerX, yPos);
            yPos += 22;
        }
        
        if (batch || section) {
            ctx.font = '13px Arial, sans-serif';
            ctx.fillText([batch, section].filter(Boolean).join(' | '), centerX, yPos);
            yPos += 30;
        }
    }
    
    yPos += 10;
    
    // Supervisor Section
    const supervisorName = document.getElementById('supervisorName').value;
    const supervisorDesignation = document.getElementById('supervisorDesignation').value;
    
    if (supervisorName) {
        ctx.fillStyle = '#666';
        ctx.font = '12px Arial, sans-serif';
        ctx.fillText('Under the Guidance of', centerX, yPos);
        yPos += 25;
        
        ctx.fillStyle = '#333';
        ctx.font = 'bold 16px Georgia, serif';
        ctx.fillText(supervisorName, centerX, yPos);
        yPos += 22;
        
        if (supervisorDesignation) {
            ctx.fillStyle = '#555';
            ctx.font = '13px Arial, sans-serif';
            ctx.fillText(supervisorDesignation, centerX, yPos);
            yPos += 25;
        }
    }
    
    // Submission Date and Academic Year at bottom
    const submissionDate = document.getElementById('submissionDate').value;
    const academicYear = document.getElementById('academicYear').value;
    
    ctx.fillStyle = '#666';
    ctx.font = '14px Georgia, serif';
    
    if (academicYear) {
        ctx.fillText('Academic Year: ' + academicYear, centerX, canvas.height - 70);
    }
    
    if (submissionDate) {
        ctx.fillText(formatDateDisplay(submissionDate), centerX, canvas.height - 50);
    }
}

function wrapText(ctx, text, x, y, maxWidth, lineHeight, returnCount = false) {
    const words = text.split(' ');
    let line = '';
    let lineCount = 0;
    
    for (let n = 0; n < words.length; n++) {
        const testLine = line + words[n] + ' ';
        const metrics = ctx.measureText(testLine);
        
        if (metrics.width > maxWidth && n > 0) {
            ctx.fillText(line.trim(), x, y);
            line = words[n] + ' ';
            y += lineHeight;
            lineCount++;
        } else {
            line = testLine;
        }
    }
    ctx.fillText(line.trim(), x, y);
    lineCount++;
    
    if (returnCount) return lineCount;
}

function downloadPNG() {
    const canvas = document.getElementById('previewCanvas');
    CutcompressTools.downloadCanvas(canvas, `Project_Front_Page_${Date.now()}.png`);
    CutcompressTools.showAlert('PNG downloaded successfully!', 'success');
}

function downloadPDF() {
    CutcompressTools.showLoading();
    
    // Create a high-res canvas for PDF
    const canvas = document.getElementById('previewCanvas');
    const tempCanvas = document.createElement('canvas');
    tempCanvas.width = canvas.width * 2;
    tempCanvas.height = canvas.height * 2;
    const tempCtx = tempCanvas.getContext('2d');
    tempCtx.scale(2, 2);
    
    // Re-draw at higher resolution
    tempCtx.drawImage(canvas, 0, 0);
    
    // Create PDF (A4 size)
    const imgData = canvas.toDataURL('image/png', 1.0);
    const pdf = new jsPDF({
        orientation: 'portrait',
        unit: 'mm',
        format: 'a4'
    });
    
    pdf.addImage(imgData, 'PNG', 0, 0, 210, 297);
    pdf.save(`Project_Front_Page_${Date.now()}.pdf`);
    
    CutcompressTools.hideLoading();
    CutcompressTools.showAlert('PDF downloaded successfully!', 'success');
}

function resetForm() {
    document.querySelectorAll('input[type="text"], input[type="date"], textarea').forEach(el => el.value = '');
    document.querySelectorAll('select').forEach(el => el.selectedIndex = 0);
    document.getElementById('submissionDate').value = new Date().toISOString().split('T')[0];
    document.getElementById('primaryColor').value = '#1a365d';
    document.getElementById('secondaryColor').value = '#c53030';
    removeLogo();
    updatePreview();
    CutcompressTools.showAlert('Form reset!', 'info');
}

// Load jsPDF
const jspdfScript = document.createElement('script');
jspdfScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';
document.head.appendChild(jspdfScript);
</script>
{% endblock %}
